// const Payment = require('../domain');
const Skill = require('../domain')
const { hiscores } = require('osrs-json-api');

const { QuestTool, questArray, questObject } = require('osrs-quest-tool')


async function getAll(req, res) {
  try {
    const data = await Payment.all();
    res.send(data)
  } catch (e) {
    res.status(400).send({ error: e.message })
  }
}

async function getQuest(req,res){

    try{
        
        var tool = new QuestTool();

        let data = tool.getQuestArray()

            res.send(data)
    }catch(e){

    }
 }


async function getSkills(req, res) {
  try {

    const rsn = req.params.rsn;


    const data = hiscores
      .getPlayer(`${rsn}`)
      .then((datos) => {

          let formatData = JSON.stringify(datos);
  
  
          var json_data = datos.skills;
          var result = [];
  
          for (var i in json_data)
            result.push([i, json_data[i]]);
  
  
  
          res.send({ result })
        

      })
      .catch((e) => { 
          
        res.send({result: [  
          [
              "overall",
              {
                  "rank": "1",
                  "level": "--",
                  "xp": "0"
              }
          ],
          [
              "attack",
              {
                  "rank": "2",
                  "level": "--",
                  "xp": "0"
              }
          ],
          [
              "defence",
              {
                  "rank": "3",
                  "level": "--",
                  "xp": "0"
              }
          ],
          [
              "strength",
              {
                  "rank": "4",
                  "level": "--",
                  "xp": "0"
              }
          ],
          [
              "hitpoints",
              {
                  "rank": "5",
                  "level": "--",
                  "xp": "0"
              }
          ],
          [
              "ranged",
              {
                  "rank": "6",
                  "level": "--",
                  "xp": "0"
              }
          ],
          [
              "prayer",
              {
                  "rank": "7",
                  "level": "--",
                  "xp": "0"
              }
          ],
          [
              "magic",
              {
                  "rank": "8",
                  "level": "--",
                  "xp": "0"
              }
          ],
          [
              "cooking",
              {
                  "rank": "9",
                  "level": "--",
                  "xp": "0"
              }
          ],
          [
              "woodcutting",
              {
                  "rank": "10",
                  "level": "--",
                  "xp": "0"
              }
          ],
          [
              "fletching",
              {
                  "rank": "11",
                  "level": "--",
                  "xp": "0"
              }
          ],
          [
              "fishing",
              {
                  "rank": "12",
                  "level": "--",
                  "xp": "0"
              }
          ],
          [
              "firemaking",
              {
                  "rank": "13",
                  "level": "--",
                  "xp": "0"
              }
          ],
          [
              "crafting",
              {
                  "rank": "14",
                  "level": "--",
                  "xp": "0"
              }
          ],
          [
              "smithing",
              {
                  "rank": "15",
                  "level": "--",
                  "xp": "0"
              }
          ],
          [
              "mining",
              {
                  "rank": "16",
                  "level": "--",
                  "xp": "0"
              }
          ],
          [
              "herblore",
              {
                  "rank": "17",
                  "level": "--",
                  "xp": "0"
              }
          ],
          [
              "agility",
              {
                  "rank": "18",
                  "level": "--",
                  "xp": "0"
              }
          ],
          [
              "thieving",
              {
                  "rank": "19",
                  "level": "--",
                  "xp": "0"
              }
          ],
          [
              "slayer",
              {
                  "rank": "20",
                  "level": "--",
                  "xp": "0"
              }
          ],
          [
              "farming",
              {
                  "rank": "21",
                  "level": "--",
                  "xp": "0"
              }
          ],
          [
              "runecraft",
              {
                  "rank": "22",
                  "level": "--",
                  "xp": "0"
              }
          ],
          [
              "hunter",
              {
                  "rank": "23",
                  "level": "--",
                  "xp": "0"
              }
          ],
          [
              "construction",
              {
                  "rank": "24",
                  "level": "--",
                  "xp": "0"
              }
          ]
      ]})      
        // res.status(400).send({ error: e.message }) 
      
      
      });




  } catch (e) {
    res.status(400).send({ error: e.message })
  }
}


async function getLvlTable(req, res) {
    try {
      const data = await Skill.all();
      res.send(data)
    } catch (e) {
      res.status(400).send({ error: e.message })
    }
  }





module.exports = {
  getAll,
  getSkills,
  getLvlTable,
  getQuest
}

// INSERT INTO `skills` (`id`, `lvl`, `xpRequired`, `difference`, `createdAt`, `updatedAt`) VALUES
//  (NULL, '1',   '0	        ', '0  ', '', ''),
//  (NULL, '2',   '83	       ', '83 ', '', ''),
//  (NULL, '3',   '174	      ', '91 ', '', ''),
//  (NULL, '4',   '276	      ', '102', '', ''),
//  (NULL, '5',   '388	      ', '112', '', ''),
//  (NULL, '6',   '512	      ', '124', '', ''),
//  (NULL, '7',   '650	      ', '138', '', ''),
//  (NULL, '8',   '801	      ', '151', '', ''),
//  (NULL, '9',   '969	      ', '168', '', ''),
//  (NULL, '010', '1154	     ', '185 ', '', ''),
//  (NULL, '111', '1358	     ', '204 ', '', ''),
//  (NULL, '012', '1584	     ', '226 ', '', ''),
//  (NULL, '013', '1833	     ', '249 ', '', ''),
//  (NULL, '014', '2107	     ', '274', '', ''),
//  (NULL, '015', '2411	     ', '304', '', ''),
//  (NULL, '016', '2746	     ', '335', '', ''),
//  (NULL, '017', '3115	     ', '369', '', ''),
//  (NULL, '018', '3523	     ', '408', '', ''),
//  (NULL, '019', '3973	     ', '450', '', ''),
//  (NULL, '020', '4470	     ', '497', '', ''),
//  (NULL, '121', '5018	     ', '548', '', ''),
//  (NULL, '022', '5624	     ', '606', '', ''),
//  (NULL, '023', '6291	     ', '667', '', ''),
//  (NULL, '024', '7028	     ', '737', '', ''),
//  (NULL, '025', '7842	     ', '814', '', ''),
//  (NULL, '026', '8740	     ', '898', '', ''),
//  (NULL, '027', '9730	     ', '990', '', ''),
//  (NULL, '028', '10.824	   ', '1094', '', ''),
//  (NULL, '029', '12.031	   ', '1207', '', ''),
//  (NULL, '030', '13.363	   ', '1332', '', ''),
//  (NULL, '131', '14.833	   ', '1470', '', ''),
//  (NULL, '032', '16.456	   ', '1623', '', ''),
//  (NULL, '033', '18.247	   ', '1791', '', ''),
//  (NULL, '034', '20.224	   ', '1977', '', ''),
//  (NULL, '035', '22.406	   ', '2182', '', ''),
//  (NULL, '036', '24.815	   ', '2409', '', ''),
//  (NULL, '037', '27.473	   ', '2658', '', ''),
//  (NULL, '038', '30.408	   ', '2935', '', ''),
//  (NULL, '039', '33.648	   ', '3240', '', ''),
//  (NULL, '040', '37.224	   ', '3576', '', ''),
//  (NULL, '041', '41.171	   ', '3947', '', ''),
//  (NULL, '042', '45.529	   ', '4358', '', ''),
//  (NULL, '043', '50.339	   ', '4810', '', ''),
//  (NULL, '044', '55.649	   ', '5310', '', ''),
//  (NULL, '045', '61.512	   ', '5863', '', ''),
//  (NULL, '046', '67.983	   ', '6471', '', ''),
//  (NULL, '047', '75.127	   ', '7144', '', ''),
//  (NULL, '048', '83.014	   ', '7887', '', ''),
//  (NULL, '049', '91.721	   ', '8707', '', ''),
//  (NULL, '050', '101.333	  ', '9612', '', ''),
//  (NULL, '151', '111.945	  ', '10.612', '', ''),
//  (NULL, '052', '123.660	  ', '11.715', '', ''),
//  (NULL, '053', '136.594	  ', '12.934', '', ''),
//  (NULL, '054', '150.872	  ', '14.278', '', ''),
//  (NULL, '055', '166.636	  ', '15.764', '', ''),
//  (NULL, '056', '184.040	  ', '17.404', '', ''),
//  (NULL, '057', '203.254	  ', '19.214', '', ''),
//  (NULL, '058', '224.466	  ', '21.212', '', ''),
//  (NULL, '059', '247.886	  ', '23.420', '', ''),
//  (NULL, '060', '273.742	  ', '25.856', '', ''),
//  (NULL, '161', '302.288	  ', '28.546', '', ''),
//  (NULL, '062', '333.804	  ', '31.516', '', ''),
//  (NULL, '063', '368.599	  ', '34.795', '', ''),
//  (NULL, '064', '407.015	  ', '38.416', '', ''),
//  (NULL, '065', '449.428	  ', '42.413', '', ''),
//  (NULL, '066', '496.254	  ', '46.826', '', ''),
//  (NULL, '067', '547.953	  ', '51.699', '', ''),
//  (NULL, '068', '605.032	  ', '57.079', '', ''),
//  (NULL, '069', '668.051	  ', '63.019', '', ''),
//  (NULL, '070', '737.627	  ', '69.576', '', ''),
//  (NULL, '171', '814.445	  ', '76.818', '', ''),
//  (NULL, '072', '899.257	  ', '84.812', '', ''),
//  (NULL, '073', '992.895	  ', '93.638', '', ''),
//  (NULL, '074', '1.096.278	', '103.383', '', ''),
//  (NULL, '075', '1.210.421	', '114.143', '', ''),
//  (NULL, '076', '1.336.443	', '126.022', '', ''),
//  (NULL, '077', '1.475.581	', '139.138', '', ''),
//  (NULL, '078', '1.629.200	', '153.619', '', ''),
//  (NULL, '079', '1.798.808	', '169.608', '', ''),
//  (NULL, '080', '1.986.068	', '187.260', '', ''),
//  (NULL, '181', '2.192.818	', '206.750', '', ''),
//  (NULL, '082', '2.421.087	', '228.269', '', ''),
//  (NULL, '083', '2.673.114	', '252.027', '', ''),
//  (NULL, '084', '2.951.373	', '278.259', '', ''),
//  (NULL, '085', '3.258.594	', '307.221', '', ''),
//  (NULL, '086', '3.597.792	', '339.198', '', ''),
//  (NULL, '087', '3.972.294	', '374.502', '', ''),
//  (NULL, '088', '4.385.776	', '413.482', '', ''),
//  (NULL, '089', '4.842.295	', '456.519', '', ''),
//  (NULL, '090', '5.346.332	', '504.037', '', ''),
//  (NULL, '191', '5.902.831	', '556.499', '', ''),
//  (NULL, '092', '6.517.253	', '614.422', '', ''),
//  (NULL, '093', '7.195.629	', '678.376', '', ''),
//  (NULL, '094', '7.944.614	', '748.985', '', ''),
//  (NULL, '095', '8.771.558	', '826.944', '', ''),
//  (NULL, '096', '9.684.577	', '913.019', '', ''),
//  (NULL, '097', '10.692.629', '1.008.052', '', ''),
//  (NULL, '098', '11.805.606', '1.112.977', '', ''),
//  (NULL, '099', '13.034.431', '1.228.825', '', ''),
//  (NULL, '100', '14.391.160', '1.356.729', '', ''),
// ;








// LEVEL	XP REQUIRED	DIFFERENCE
//                       0   
//                        83   
//                         91   
//                         102  
//                         112   
//                         124   
//                         138   
//                         151   
//                         168   
// 1    185                
// 1    204                
// 1    226                
// 1    249                
// 1    274                
// 1    304                
// 1    335                
// 1    369                
// 1    408                
// 1    450                
// 2    497                
// 2    548                
// 2    606                
// 2    667                
// 2    737                
// 2    814                
// 2    898                
// 2    990                
// 2      1094              
// 2      1207              
// 3      1332              
// 3      1470              
// 3      1623              
// 3      1791              
// 3      1977              
// 3      2182              
// 3      2409              
// 3      2658              
// 3      2935              
// 3      3240              
// 4      3576              
// 4      3947              
// 4      4358              
// 4      4810              
// 4      5310              
// 4      5863              
// 4      6471              
// 4      7144              
// 4      7887              
// 4      8707              
// 5       9612              
// 5       10.612          
// 5       11.715          
// 5       12.934          
// 5       14.278          
// 5       15.764          
// 5       17.404          
// 5       19.214          
// 5       21.212          
// 5       23.420          
// 6       25.856          
// 6       28.546          
// 6       31.516          
// 6       34.795          
// 6       38.416          
// 6       42.413          
// 6       46.826          
// 6       51.699          
// 6       57.079          
// 6       63.019          
// 7       69.576          
// 7       76.818          
// 7       84.812          
// 7       93.638          
// 7         103.383        
// 7         114.143        
// 7         126.022        
// 7         139.138        
// 7         153.619        
// 7         169.608        
// 8         187.260        
// 8         206.750        
// 8         228.269        
// 8         252.027        
// 8         278.259        
// 8         307.221        
// 8         339.198        
// 8         374.502        
// 8         413.482        
// 8         456.519        
// 9         504.037        
// 9         556.499        
// 9         614.422        
// 9         678.376        
// 9         748.985        
// 9         826.944        
// 9         913.019        
// 9	         1.008.052     
// 9	         1.112.977     
// 9	         1.228.825     
// 100	14.391.160	         1.356.729 


